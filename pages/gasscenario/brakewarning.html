<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Car Simulation</title>
    <link rel="stylesheet" href="/styles.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
    
</head>
<body>
    <h1> Pull the Hand Break! </h1>

    <div class="card my-4">
        <div class="card-body">
            <h5 class="card-title">Instructions</h5>
            <p class="card-text">Click and drag the hand to pull the handbrake. Once done, press Continue to move to the next step.</p>
        </div>
    </div>

    <div id="interior-container">
        <img src="/assets/gascarinterior.jpg" id="car-interior">
        <img src="/assets/hand2.png" id="hand">
        <div id="HandBreakZone"></div>
        <button id="continueBtn" disabled>Continue</button>
    </div>

    <script>
      
const hand = document.getElementById("hand");
const continueBtn = document.getElementById("continueBtn");
const HandBreakZone = document.getElementById("HandBreakZone");

let isDragging = false;
let offsetX = 0;
let offsetY = 0;

hand.addEventListener("mousedown", (e) => {
  isDragging = true;

  
  const rect = hand.getBoundingClientRect();
  offsetX = e.clientX - rect.left;
  offsetY = e.clientY - rect.top;

  hand.style.cursor = "grabbing";
});

document.addEventListener("mousemove", (e) => {
  if (isDragging) {
    hand.style.left = `${e.clientX - offsetX}px`;
    hand.style.top = `${e.clientY - offsetY}px`;
  }
});

document.addEventListener("mouseup", () => {
  isDragging = false;
  hand.style.cursor = "grab";

  // Check if hand overlaps hand break zone
  const handRect = hand.getBoundingClientRect();
  const zoneRect = HandBreakZone.getBoundingClientRect();

  if (
    handRect.left < zoneRect.right &&
    handRect.right > zoneRect.left &&
    handRect.top < zoneRect.bottom &&
    handRect.bottom > zoneRect.top
  ) {

    HandBreakZone.style.border = "3px solid red";

    // Correct placement -> unlock continue button
    continueBtn.disabled = false;   // enable it
    continueBtn.style.display = "block";
    alert("Nice! You found the Hand Break Zone.");
  }
  else {
    // Hide the highlight if hand is not on zone
    HandBreakZone.style.border = "3px solid transparent";
  }
});

// prevent the ghost-image drag effect
hand.addEventListener("dragstart", (e) => e.preventDefault());

  </script>

</body>
</html>

    
